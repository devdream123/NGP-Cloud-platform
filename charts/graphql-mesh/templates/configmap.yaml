---
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "mesh.fullname" . }}-meshrc-cm
data:
  .meshrc.yaml: |-
    ---
    serve:
        cors:
          origin: '{{ .Values.mesh.cors.origin }}'
        hostname: 0.0.0.0
        port: {{ .Values.service.port }}

    sources:
      - name: Deal Sheet
        handler:
          graphql:
            endpoint: http://{{ .Values.dealSheet.hostname }}:{{ .Values.dealSheet.port }}/graphql/
      - name: Calendar
        handler:
          graphql:
            endpoint: http://{{ .Values.calendar.hostname }}:{{ .Values.calendar.port }}/graphql/
      - name: Hierarchy
        handler:
          graphql:
            endpoint: http://{{ .Values.hierarchy.hostname }}:{{ .Values.hierarchy.port }}/
