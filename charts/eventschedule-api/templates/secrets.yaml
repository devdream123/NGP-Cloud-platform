{{- if ne .Values.database.auth "iam" }}
apiVersion: v1
kind: Secret
type: Opaque
metadata:
  name: {{ include "eventschedule-api.fullname" . }}-secrets
  labels:
    {{- include "eventschedule-api.labels" . | nindent 4 }}
data:
  CONNECTION_STRING: Driver={PostgreSQL ODBC Driver(UNICODE)};Server={{ .Values.database.user }};Port={{ .Values.database.port }};Database={{ .Values.database.db }};UID={{ .Values.database.user }};PWD={{ .Values.database.pwd | b64enc }}
{{- end }}

